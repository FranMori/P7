{"remainingRequest":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\auth\\index.js","dependencies":[{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\auth\\index.js","mtime":1634720768317},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvRnJhblx4RTdvaXMgTW9yaWFtXHhFOS9Eb2N1bWVudHMvT3BlbkNsYXNzUm9vbXMvUDcvZnJvbnRlbmQvZ3JvdXBvbWFuaWEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvRnJhblx4RTdvaXMgTW9yaWFtXHhFOS9Eb2N1bWVudHMvT3BlbkNsYXNzUm9vbXMvUDcvZnJvbnRlbmQvZ3JvdXBvbWFuaWEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0IGNyZWF0ZUF1dGgwQ2xpZW50IGZyb20gJ0BhdXRoMC9hdXRoMC1zcGEtanMnOwppbXBvcnQgeyBjb21wdXRlZCwgcmVhY3RpdmUsIHdhdGNoRWZmZWN0IH0gZnJvbSAndnVlJzsKdmFyIGNsaWVudDsKdmFyIHN0YXRlID0gcmVhY3RpdmUoewogIGxvYWRpbmc6IHRydWUsCiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSwKICB1c2VyOiB7fSwKICBwb3B1cE9wZW46IGZhbHNlLAogIGVycm9yOiBudWxsCn0pOwoKZnVuY3Rpb24gbG9naW5XaXRoUG9wdXAoKSB7CiAgcmV0dXJuIF9sb2dpbldpdGhQb3B1cC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfbG9naW5XaXRoUG9wdXAoKSB7CiAgX2xvZ2luV2l0aFBvcHVwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHN0YXRlLnBvcHVwT3BlbiA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gY2xpZW50LmxvZ2luV2l0aFBvcHVwKDApOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNjsKICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDEpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0Mi50MCk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgIHN0YXRlLnBvcHVwT3BlbiA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCg5KTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICByZXR1cm4gY2xpZW50LmdldFVzZXIoKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBzdGF0ZS51c2VyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHRydWU7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgNiwgOSwgMTJdXSk7CiAgfSkpOwogIHJldHVybiBfbG9naW5XaXRoUG9wdXAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gaGFuZGxlUmVkaXJlY3RDYWxsYmFjaygpIHsKICByZXR1cm4gX2hhbmRsZVJlZGlyZWN0Q2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2hhbmRsZVJlZGlyZWN0Q2FsbGJhY2soKSB7CiAgX2hhbmRsZVJlZGlyZWN0Q2FsbGJhY2sgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gY2xpZW50LmhhbmRsZVJlZGlyZWN0Q2FsbGJhY2soKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5nZXRVc2VyKCk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBzdGF0ZS51c2VyID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTM7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTA7CiAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBfY29udGV4dDMudDA7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMzsKICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCgxMyk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMSwgMTAsIDEzLCAxNl1dKTsKICB9KSk7CiAgcmV0dXJuIF9oYW5kbGVSZWRpcmVjdENhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGxvZ2luV2l0aFJlZGlyZWN0KG8pIHsKICByZXR1cm4gY2xpZW50LmxvZ2luV2l0aFJlZGlyZWN0KG8pOwp9CgpmdW5jdGlvbiBnZXRJZFRva2VuQ2xhaW1zKG8pIHsKICByZXR1cm4gY2xpZW50LmdldElkVG9rZW5DbGFpbXMobyk7Cn0KCmZ1bmN0aW9uIGdldFRva2VuU2lsZW50bHkobykgewogIHJldHVybiBjbGllbnQuZ2V0VG9rZW5TaWxlbnRseShvKTsKfQoKZnVuY3Rpb24gZ2V0VG9rZW5XaXRoUG9wdXAobykgewogIHJldHVybiBjbGllbnQuZ2V0VG9rZW5XaXRoUG9wdXAobyk7Cn0KCmZ1bmN0aW9uIGxvZ291dChvKSB7CiAgcmV0dXJuIGNsaWVudC5sb2dvdXQobyk7Cn0KCnZhciBhdXRoUGx1Z2luID0gewogIGlzQXV0aGVudGljYXRlZDogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0YXRlLmlzQXV0aGVudGljYXRlZDsKICB9KSwKICBsb2FkaW5nOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RhdGUubG9hZGluZzsKICB9KSwKICB1c2VyOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RhdGUudXNlcjsKICB9KSwKICBnZXRJZFRva2VuQ2xhaW1zOiBnZXRJZFRva2VuQ2xhaW1zLAogIGdldFRva2VuU2lsZW50bHk6IGdldFRva2VuU2lsZW50bHksCiAgZ2V0VG9rZW5XaXRoUG9wdXA6IGdldFRva2VuV2l0aFBvcHVwLAogIGhhbmRsZVJlZGlyZWN0Q2FsbGJhY2s6IGhhbmRsZVJlZGlyZWN0Q2FsbGJhY2ssCiAgbG9naW5XaXRoUmVkaXJlY3Q6IGxvZ2luV2l0aFJlZGlyZWN0LAogIGxvZ2luV2l0aFBvcHVwOiBsb2dpbldpdGhQb3B1cCwKICBsb2dvdXQ6IGxvZ291dAp9OwpleHBvcnQgdmFyIHJvdXRlR3VhcmQgPSBmdW5jdGlvbiByb3V0ZUd1YXJkKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGF1dGhQbHVnaW4uaXNBdXRoZW50aWNhdGVkLAogICAgICBsb2FkaW5nID0gYXV0aFBsdWdpbi5sb2FkaW5nLAogICAgICBsb2dpbldpdGhSZWRpcmVjdCA9IGF1dGhQbHVnaW4ubG9naW5XaXRoUmVkaXJlY3Q7CgogIHZhciB2ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkoKSB7CiAgICAvLyBJZiB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkLCBjb250aW51ZSB3aXRoIHRoZSByb3V0ZQogICAgaWYgKGlzQXV0aGVudGljYXRlZC52YWx1ZSkgewogICAgICByZXR1cm4gbmV4dCgpOwogICAgfSAvLyBPdGhlcndpc2UsIGxvZyBpbgoKCiAgICBsb2dpbldpdGhSZWRpcmVjdCh7CiAgICAgIGFwcFN0YXRlOiB7CiAgICAgICAgdGFyZ2V0VXJsOiB0by5mdWxsUGF0aAogICAgICB9CiAgICB9KTsKICB9OyAvLyBJZiBsb2FkaW5nIGhhcyBhbHJlYWR5IGZpbmlzaGVkLCBjaGVjayBvdXIgYXV0aCBzdGF0ZSB1c2luZyBgZm4oKWAKCgogIGlmICghbG9hZGluZy52YWx1ZSkgewogICAgcmV0dXJuIHZlcmlmeSgpOwogIH0gLy8gV2F0Y2ggZm9yIHRoZSBsb2FkaW5nIHByb3BlcnR5IHRvIGNoYW5nZSBiZWZvcmUgd2UgY2hlY2sgaXNBdXRoZW50aWNhdGVkCgoKICB3YXRjaEVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAobG9hZGluZy52YWx1ZSA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuIHZlcmlmeSgpOwogICAgfQogIH0pOwp9OwpleHBvcnQgdmFyIHNldHVwQXV0aCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUob3B0aW9ucywgY2FsbGJhY2tSZWRpcmVjdCkgewogICAgdmFyIF95aWVsZCRjbGllbnQkaGFuZGxlUiwgYXBwU3RhdGU7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUF1dGgwQ2xpZW50KF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNsaWVudCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwoKICAgICAgICAgICAgaWYgKCEod2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygnY29kZT0nKSAmJiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKCdzdGF0ZT0nKSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICByZXR1cm4gY2xpZW50LmhhbmRsZVJlZGlyZWN0Q2FsbGJhY2soKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF95aWVsZCRjbGllbnQkaGFuZGxlUiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGFwcFN0YXRlID0gX3lpZWxkJGNsaWVudCRoYW5kbGVSLmFwcFN0YXRlOwogICAgICAgICAgICAvLyBOb3RpZnkgc3Vic2NyaWJlcnMgdGhhdCB0aGUgcmVkaXJlY3QgY2FsbGJhY2sgaGFzIGhhcHBlbmVkLCBwYXNzaW5nIHRoZSBhcHBTdGF0ZQogICAgICAgICAgICAvLyAodXNlZnVsIGZvciByZXRyaWV2aW5nIGFueSBwcmUtYXV0aGVudGljYXRpb24gc3RhdGUpCiAgICAgICAgICAgIGNhbGxiYWNrUmVkaXJlY3QoYXBwU3RhdGUpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEyOwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICBzdGF0ZS5lcnJvciA9IF9jb250ZXh0LnQwOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICByZXR1cm4gY2xpZW50LmlzQXV0aGVudGljYXRlZCgpOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5nZXRVc2VyKCk7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgc3RhdGUudXNlciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgxNSk7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoYXBwKSB7CiAgICAgICAgICAgICAgICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJGF1dGggPSBhdXRoUGx1Z2luOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzMsIDEyLCAxNSwgMjRdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gc2V0dXBBdXRoKF94LCBfeDIpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOw=="},{"version":3,"sources":["C:/Users/François Moriamé/Documents/OpenClassRooms/P7/frontend/groupomania/src/auth/index.js"],"names":["createAuth0Client","computed","reactive","watchEffect","client","state","loading","isAuthenticated","user","popupOpen","error","loginWithPopup","console","getUser","handleRedirectCallback","loginWithRedirect","o","getIdTokenClaims","getTokenSilently","getTokenWithPopup","logout","authPlugin","routeGuard","to","from","next","verify","value","appState","targetUrl","fullPath","setupAuth","options","callbackRedirect","window","location","search","includes","install","app","config","globalProperties","$auth"],"mappings":"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","sourcesContent":["import createAuth0Client from '@auth0/auth0-spa-js'\r\nimport { computed, reactive, watchEffect } from 'vue'\r\n\r\nlet client\r\nconst state = reactive({\r\n  loading: true,\r\n  isAuthenticated: false,\r\n  user: {},\r\n  popupOpen: false,\r\n  error: null,\r\n})\r\n\r\nasync function loginWithPopup() {\r\n  state.popupOpen = true\r\n\r\n  try {\r\n    await client.loginWithPopup(0)\r\n  } catch (e) {\r\n    console.error(e)\r\n  } finally {\r\n    state.popupOpen = false\r\n  }\r\n\r\n  state.user = await client.getUser()\r\n  state.isAuthenticated = true\r\n}\r\n\r\nasync function handleRedirectCallback() {\r\n  state.loading = true\r\n\r\n  try {\r\n    await client.handleRedirectCallback()\r\n    state.user = await client.getUser()\r\n    state.isAuthenticated = true\r\n  } catch (e) {\r\n    state.error = e\r\n  } finally {\r\n    state.loading = false\r\n  }\r\n}\r\n\r\nfunction loginWithRedirect(o) {\r\n  return client.loginWithRedirect(o)\r\n}\r\n\r\nfunction getIdTokenClaims(o) {\r\n  return client.getIdTokenClaims(o)\r\n}\r\n\r\nfunction getTokenSilently(o) {\r\n  return client.getTokenSilently(o)\r\n}\r\n\r\nfunction getTokenWithPopup(o) {\r\n  return client.getTokenWithPopup(o)\r\n}\r\n\r\nfunction logout(o) {\r\n  return client.logout(o)\r\n}\r\n\r\nconst authPlugin = {\r\n  isAuthenticated: computed(() => state.isAuthenticated),\r\n  loading: computed(() => state.loading),\r\n  user: computed(() => state.user),\r\n  getIdTokenClaims,\r\n  getTokenSilently,\r\n  getTokenWithPopup,\r\n  handleRedirectCallback,\r\n  loginWithRedirect,\r\n  loginWithPopup,\r\n  logout,\r\n}\r\n\r\nexport const routeGuard = (to, from, next) => {\r\n  const { isAuthenticated, loading, loginWithRedirect } = authPlugin\r\n\r\n  const verify = () => {\r\n    // If the user is authenticated, continue with the route\r\n    if (isAuthenticated.value) {\r\n      return next()\r\n    }\r\n\r\n    // Otherwise, log in\r\n    loginWithRedirect({ appState: { targetUrl: to.fullPath } })\r\n  }\r\n\r\n  // If loading has already finished, check our auth state using `fn()`\r\n  if (!loading.value) {\r\n    return verify()\r\n  }\r\n\r\n  // Watch for the loading property to change before we check isAuthenticated\r\n  watchEffect(() => {\r\n    if (loading.value === false) {\r\n      return verify()\r\n    }\r\n  })\r\n}\r\n\r\nexport const setupAuth = async (options, callbackRedirect) => {\r\n  client = await createAuth0Client({\r\n    ...options,\r\n  })\r\n\r\n  try {\r\n    // If the user is returning to the app after authentication\r\n    \r\n\r\n    if (\r\n      window.location.search.includes('code=') &&\r\n      window.location.search.includes('state=')\r\n    ) {\r\n      // handle the redirect and retrieve tokens\r\n      const { appState } = await client.handleRedirectCallback()\r\n\r\n      // Notify subscribers that the redirect callback has happened, passing the appState\r\n      // (useful for retrieving any pre-authentication state)\r\n      callbackRedirect(appState)\r\n    }\r\n  } catch (e) {\r\n    state.error = e\r\n  } finally {\r\n    // Initialize our internal authentication state\r\n    state.isAuthenticated = await client.isAuthenticated()\r\n    state.user = await client.getUser()\r\n    state.loading = false\r\n  }\r\n\r\n  return {\r\n    install: (app) => {\r\n      app.config.globalProperties.$auth = authPlugin\r\n    },\r\n  }\r\n}\r\n\r\n"]}]}