{"remainingRequest":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\views\\Login.vue","mtime":1635845892378},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBGb3JtLCBGaWVsZCwgRXJyb3JNZXNzYWdlIH0gZnJvbSAidmVlLXZhbGlkYXRlIjsKaW1wb3J0ICogYXMgeXVwIGZyb20gInl1cCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudHM6IHsKICAgIEZvcm06IEZvcm0sCiAgICBGaWVsZDogRmllbGQsCiAgICBFcnJvck1lc3NhZ2U6IEVycm9yTWVzc2FnZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBzY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoewogICAgICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCJFbWFpbCBpcyByZXF1aXJlZCEiKSwKICAgICAgcGFzc3dvcmQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZCgiUGFzc3dvcmQgaXMgcmVxdWlyZWQhIikKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG1lc3NhZ2U6ICIiLAogICAgICBzY2hlbWE6IHNjaGVtYQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyAuLi5tYXBTdGF0ZShbJ3N0YXR1cyddKQogICAgbG9nZ2VkSW46IGZ1bmN0aW9uIGxvZ2dlZEluKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC5zdGF0dXMubG9nZ2VkSW47CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMubG9nZ2VkSW4pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9wcm9maWxlIik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVMb2dpbjogZnVuY3Rpb24gaGFuZGxlTG9naW4odXNlcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImF1dGgvbG9naW4iLCB1c2VyKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9wcm9maWxlIik7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5tZXNzYWdlID0gZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZSB8fCBlcnJvci50b1N0cmluZygpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\views\\Login.vue"],"names":[],"mappings":";;AAwBA,SAAS,IAAT,EAAe,KAAf,EAAsB,YAAtB,QAA0C,cAA1C;AACA,OAAO,KAAK,GAAZ,MAAqB,KAArB;AAGA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,IAAI,EAAJ,IADU;AAEV,IAAA,KAAK,EAAL,KAFU;AAGV,IAAA,YAAY,EAAZ;AAHU,GAFC;AAOZ,EAAA,IAPY,kBAOL;AACN,QAAM,MAAK,GAAI,GAAG,CAAC,MAAJ,GAAa,KAAb,CAAmB;AAChC,MAAA,KAAK,EAAE,GAAG,CAAC,MAAJ,GAAa,QAAb,CAAsB,oBAAtB,CADyB;AAEhC,MAAA,QAAQ,EAAE,GAAG,CAAC,MAAJ,GAAa,QAAb,CAAsB,uBAAtB;AAFsB,KAAnB,CAAf;AAKA,WAAO;AACL,MAAA,OAAO,EAAE,KADJ;AAEL,MAAA,OAAO,EAAE,EAFJ;AAGL,MAAA,MAAM,EAAN;AAHK,KAAP;AAKD,GAlBY;AAmBb,EAAA,QAAO,EAAI;AACT;AACA,IAAA,QAFS,sBAEE;AACT,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,MAAvB,CAA8B,QAArC;AACD;AAJQ,GAnBE;AA0Bb,EAAA,OA1Ba,qBA0BH;AACN,QAAI,KAAK,QAAT,EAAmB;AACjB,WAAK,OAAL,CAAa,IAAb,CAAkB,UAAlB;AACF;AACD,GA9BU;AA+BZ,EAAA,OAAO,EAAE;AACR,IAAA,WADQ,uBACI,IADJ,EACU;AAAA;;AAChB,WAAK,OAAL,GAAe,IAAf;AAEA,WAAK,MAAL,CAAY,QAAZ,CAAqB,YAArB,EAAmC,IAAnC,EAAyC,IAAzC,CACE,YAAM;AACJ,QAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,UAAlB;AACD,OAHH,EAIE,UAAC,KAAD,EAAW;AACT,QAAA,KAAI,CAAC,OAAL,GAAe,KAAf;AACA,QAAA,KAAI,CAAC,OAAL,GACG,KAAK,CAAC,QAAN,IACC,KAAK,CAAC,QAAN,CAAe,IADhB,IAEC,KAAK,CAAC,QAAN,CAAe,IAAf,CAAoB,OAFtB,IAGA,KAAK,CAAC,OAHN,IAIA,KAAK,CAAC,QAAN,EALF;AAMF,OAZF;AAcD;AAlBO;AA/BG,CAAf","sourcesContent":["<template>\r\n<div id=\"login\">\r\n  <h1>Login</h1>\r\n<Form @submit=\"handleLogin\" :validation-schema=\"schema\">\r\n  <div>\r\n    <label for=\"email\">Email</label>\r\n    <Field name=\"email\" type=\"text\"/>\r\n    <ErrorMessage name=\"email\" class=\"error-feedback\" />\r\n  </div>\r\n  <div>\r\n    <label for=\"password\">Mot de passe</label>\r\n    <Field name=\"password\" type=\"password\"/>\r\n    <ErrorMessage name=\"password\" class=\"error-feedback\" />\r\n  </div>\r\n  \r\n  <div v-if=\"mode === 'login' && status === 'error_login'\" >\r\n    Adresse mail et/ou mot de passe invalide\r\n  </div>\r\n  <button> <span v-if=\"status === 'loading'\">Connexion en cours ...</span> <span v-else>Connexion</span> </button>\r\n  </Form>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { Form, Field, ErrorMessage } from \"vee-validate\"\r\nimport * as yup from \"yup\"\r\n\r\n\r\nexport default {\r\n  name: 'Login',\r\n  components: {\r\n    Form,\r\n    Field,\r\n    ErrorMessage,\r\n  },\r\n   data() {\r\n    const schema = yup.object().shape({\r\n      email: yup.string().required(\"Email is required!\"),\r\n      password: yup.string().required(\"Password is required!\"),\r\n    });\r\n\r\n    return {\r\n      loading: false,\r\n      message: \"\",\r\n      schema,\r\n    };\r\n  },\r\n  computed : {\r\n    // ...mapState(['status'])\r\n    loggedIn() {\r\n      return this.$store.state.auth.status.loggedIn\r\n    },\r\n    \r\n  },\r\n  created() {\r\n      if (this.loggedIn) {\r\n        this.$router.push(\"/profile\")\r\n      }\r\n    },\r\n   methods: {\r\n    handleLogin(user) {\r\n      this.loading = true;\r\n\r\n      this.$store.dispatch(\"auth/login\", user).then(\r\n        () => {\r\n          this.$router.push(\"/profile\");\r\n        },\r\n        (error) => {\r\n          this.loading = false;\r\n          this.message =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n        }\r\n      );\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n"],"sourceRoot":""}]}