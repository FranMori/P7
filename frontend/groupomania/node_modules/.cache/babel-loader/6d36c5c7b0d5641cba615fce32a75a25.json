{"remainingRequest":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\views\\Login.vue?vue&type=template&id=26084dc2","dependencies":[{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\views\\Login.vue","mtime":1635845892378},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1632349277000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGlkOiAibG9naW4iCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJoMSIsIG51bGwsICJMb2dpbiIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImxhYmVsIiwgewogIGZvcjogImVtYWlsIgp9LCAiRW1haWwiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJsYWJlbCIsIHsKICBmb3I6ICJwYXNzd29yZCIKfSwgIk1vdCBkZSBwYXNzZSIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF81ID0gewogIGtleTogMAp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBrZXk6IDAKfTsKdmFyIF9ob2lzdGVkXzcgPSB7CiAga2V5OiAxCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfRmllbGQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiRmllbGQiKTsKCiAgdmFyIF9jb21wb25lbnRfRXJyb3JNZXNzYWdlID0gX3Jlc29sdmVDb21wb25lbnQoIkVycm9yTWVzc2FnZSIpOwoKICB2YXIgX2NvbXBvbmVudF9Gb3JtID0gX3Jlc29sdmVDb21wb25lbnQoIkZvcm0iKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19ob2lzdGVkXzIsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0Zvcm0sIHsKICAgIG9uU3VibWl0OiAkb3B0aW9ucy5oYW5kbGVMb2dpbiwKICAgICJ2YWxpZGF0aW9uLXNjaGVtYSI6ICRkYXRhLnNjaGVtYQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBudWxsLCBbX2hvaXN0ZWRfMywgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfRmllbGQsIHsKICAgICAgICBuYW1lOiAiZW1haWwiLAogICAgICAgIHR5cGU6ICJ0ZXh0IgogICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfRXJyb3JNZXNzYWdlLCB7CiAgICAgICAgbmFtZTogImVtYWlsIiwKICAgICAgICBjbGFzczogImVycm9yLWZlZWRiYWNrIgogICAgICB9KV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBudWxsLCBbX2hvaXN0ZWRfNCwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfRmllbGQsIHsKICAgICAgICBuYW1lOiAicGFzc3dvcmQiLAogICAgICAgIHR5cGU6ICJwYXNzd29yZCIKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0Vycm9yTWVzc2FnZSwgewogICAgICAgIG5hbWU6ICJwYXNzd29yZCIsCiAgICAgICAgY2xhc3M6ICJlcnJvci1mZWVkYmFjayIKICAgICAgfSldKSwgX2N0eC5tb2RlID09PSAnbG9naW4nICYmIF9jdHguc3RhdHVzID09PSAnZXJyb3JfbG9naW4nID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfNSwgIiBBZHJlc3NlIG1haWwgZXQvb3UgbW90IGRlIHBhc3NlIGludmFsaWRlICIpKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgbnVsbCwgW19jdHguc3RhdHVzID09PSAnbG9hZGluZycgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJzcGFuIiwgX2hvaXN0ZWRfNiwgIkNvbm5leGlvbiBlbiBjb3VycyAuLi4iKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJzcGFuIiwgX2hvaXN0ZWRfNywgIkNvbm5leGlvbiIpKV0pXTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0sIDgKICAvKiBQUk9QUyAqLwogICwgWyJvblN1Ym1pdCIsICJ2YWxpZGF0aW9uLXNjaGVtYSJdKV0pOwp9"},{"version":3,"sources":["C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\views\\Login.vue"],"names":[],"mappings":";;AACK,EAAA,EAAE,EAAC;;;8BACN,mBAAA,CAAc,IAAd,EAAc,IAAd,EAAI,OAAJ,EAAS,CAAA;AAAA;AAAT,C;;8BAGE,mBAAA,CAAgC,OAAhC,EAAgC;AAAzB,EAAA,GAAG,EAAC;AAAqB,CAAhC,EAAmB,OAAnB,EAAwB,CAAA;AAAA;AAAxB,C;;8BAKA,mBAAA,CAA0C,OAA1C,EAA0C;AAAnC,EAAA,GAAG,EAAC;AAA+B,CAA1C,EAAsB,cAAtB,EAAkC,CAAA;AAAA;AAAlC,C;;;;;;;;;;;;;;;;;;uBATJ,mBAAA,CAmBM,KAnBN,EAAA,UAAA,EAmBM,CAlBJ,UAkBI,EAjBN,YAAA,CAgBS,eAhBT,EAgBS;AAhBF,IAAA,QAAM,EAAE,QAAA,CAAA,WAgBN;AAhBoB,yBAAmB,KAAA,CAAA;AAgBvC,GAhBT,E;sBACE;AAAA,aAIM,CAJN,mBAAA,CAIM,KAJN,EAIM,IAJN,EAIM,CAHJ,UAGI,EAFJ,YAAA,CAAiC,gBAAjC,EAAiC;AAA1B,QAAA,IAAI,EAAC,OAAqB;AAAb,QAAA,IAAI,EAAC;AAAQ,OAAjC,CAEI,EADJ,YAAA,CAAoD,uBAApD,EAAoD;AAAtC,QAAA,IAAI,EAAC,OAAiC;AAAzB,QAAA,KAAK,EAAC;AAAmB,OAApD,CACI,CAJN,CAIM,EACN,mBAAA,CAIM,KAJN,EAIM,IAJN,EAIM,CAHJ,UAGI,EAFJ,YAAA,CAAwC,gBAAxC,EAAwC;AAAjC,QAAA,IAAI,EAAC,UAA4B;AAAjB,QAAA,IAAI,EAAC;AAAY,OAAxC,CAEI,EADJ,YAAA,CAAuD,uBAAvD,EAAuD;AAAzC,QAAA,IAAI,EAAC,UAAoC;AAAzB,QAAA,KAAK,EAAC;AAAmB,OAAvD,CACI,CAJN,CADM,EAOK,IAAA,CAAA,IAAA,KAAI,OAAJ,IAAoB,IAAA,CAAA,MAAA,KAAM,a,kBAArC,mBAAA,CAEM,KAFN,EAEM,UAFN,EAA0D,4CAA1D,C,qCAPM,EAUN,mBAAA,CAAgH,QAAhH,EAAgH,IAAhH,EAAgH,CAA3F,IAAA,CAAA,MAAA,KAAM,S,kBAAlB,mBAAA,CAA+D,MAA/D,EAA+D,UAA/D,EAAkC,wBAAlC,C,mBAAgE,mBAAA,CAA6B,MAA7B,EAA6B,UAA7B,EAAa,WAAb,C,CAAuC,CAAhH,CAVM,CAJN;AAAA,K;;;;GADF,E;;AAAA,I,iCAAA,CAiBM,CAnBN,C","sourcesContent":["<template>\r\n<div id=\"login\">\r\n  <h1>Login</h1>\r\n<Form @submit=\"handleLogin\" :validation-schema=\"schema\">\r\n  <div>\r\n    <label for=\"email\">Email</label>\r\n    <Field name=\"email\" type=\"text\"/>\r\n    <ErrorMessage name=\"email\" class=\"error-feedback\" />\r\n  </div>\r\n  <div>\r\n    <label for=\"password\">Mot de passe</label>\r\n    <Field name=\"password\" type=\"password\"/>\r\n    <ErrorMessage name=\"password\" class=\"error-feedback\" />\r\n  </div>\r\n  \r\n  <div v-if=\"mode === 'login' && status === 'error_login'\" >\r\n    Adresse mail et/ou mot de passe invalide\r\n  </div>\r\n  <button> <span v-if=\"status === 'loading'\">Connexion en cours ...</span> <span v-else>Connexion</span> </button>\r\n  </Form>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { Form, Field, ErrorMessage } from \"vee-validate\"\r\nimport * as yup from \"yup\"\r\n\r\n\r\nexport default {\r\n  name: 'Login',\r\n  components: {\r\n    Form,\r\n    Field,\r\n    ErrorMessage,\r\n  },\r\n   data() {\r\n    const schema = yup.object().shape({\r\n      email: yup.string().required(\"Email is required!\"),\r\n      password: yup.string().required(\"Password is required!\"),\r\n    });\r\n\r\n    return {\r\n      loading: false,\r\n      message: \"\",\r\n      schema,\r\n    };\r\n  },\r\n  computed : {\r\n    // ...mapState(['status'])\r\n    loggedIn() {\r\n      return this.$store.state.auth.status.loggedIn\r\n    },\r\n    \r\n  },\r\n  created() {\r\n      if (this.loggedIn) {\r\n        this.$router.push(\"/profile\")\r\n      }\r\n    },\r\n   methods: {\r\n    handleLogin(user) {\r\n      this.loading = true;\r\n\r\n      this.$store.dispatch(\"auth/login\", user).then(\r\n        () => {\r\n          this.$router.push(\"/profile\");\r\n        },\r\n        (error) => {\r\n          this.loading = false;\r\n          this.message =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n        }\r\n      );\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n"],"sourceRoot":""}]}