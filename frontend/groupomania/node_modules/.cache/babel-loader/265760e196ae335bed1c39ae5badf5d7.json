{"remainingRequest":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\src\\store\\index.js","mtime":1633525570855},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\François Moriamé\\Documents\\OpenClassRooms\\P7\\frontend\\groupomania\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGNyZWF0ZVN0b3JlIH0gZnJvbSAndnVleCc7Cgp2YXIgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOwoKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaScKfSk7CnZhciBzdG9yZSA9IGNyZWF0ZVN0b3JlKHsKICBzdGF0ZTogewogICAgc3RhdHVzOiAnJywKICAgIHVzZXI6IHsKICAgICAgaWQ6IC0xLAogICAgICB0b2tlbjogJycKICAgIH0sCiAgICB1c2VySW5mb3M6IHsKICAgICAgbm9tOiAnJywKICAgICAgcHJlbm9tOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIGltYWdlOiAnJwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRTdGF0dXM6IGZ1bmN0aW9uIHNldFN0YXR1cyhzdGF0ZSwgc3RhdHVzKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9IHN0YXR1czsKICAgIH0sCiAgICBsb2dVc2VyOiBmdW5jdGlvbiBsb2dVc2VyKHN0YXRlLCB1c2VyKSB7CiAgICAgIGluc3RhbmNlLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB1c2VyLnRva2VuOwogICAgICBzdGF0ZS51c2VyID0gdXNlcjsKICAgIH0sCiAgICB1c2VySW5mb3M6IGZ1bmN0aW9uIHVzZXJJbmZvcyhzdGF0ZSwgX3VzZXJJbmZvcykgewogICAgICBzdGF0ZS51c2VySW5mb3MgPSBfdXNlckluZm9zOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgY3JlYXRlQWNjb3VudDogZnVuY3Rpb24gY3JlYXRlQWNjb3VudChfcmVmLCB1c2VySW5mb3MpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdDsKICAgICAgICBpbnN0YW5jZS5wb3N0KCcvYXV0aC9zaWdudXAnLCB1c2VySW5mb3MpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb21taXQoJ3NldFN0YXR1cycsICdjcmVhdGVkJyk7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbW1pdCgnc2V0U3RhdHVzJywgJ2Vycm9yX2NyZWF0ZScpOwogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYyLCB1c2VySW5mb3MpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgY29tbWl0KCdzZXRTdGF0dXMnLCAnbG9hZGluZycpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGluc3RhbmNlLnBvc3QoJy9hdXRoL2xvZ2luJywgdXNlckluZm9zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29tbWl0KCdzZXRTdGF0dXMnLCAnZXJyb3JfbG9naW4nKTsKICAgICAgICAgIGNvbW1pdCgnbG9nVXNlcicsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb21taXQoJ3NldFN0YXR1cycsICcnKTsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFVzZXJJbmZvczogZnVuY3Rpb24gZ2V0VXNlckluZm9zKF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGluc3RhbmNlLmdldCgnL2F1dGgvcHJvZmlsZScpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29tbWl0KCd1c2VySW5mb3MnLCByZXNwb25zZS5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIGdldFVzZXI6IGZ1bmN0aW9uIGdldFVzZXIoX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgaW5zdGFuY2UuZ2V0KCcvYXV0aC9wcm9maWxlLzppZCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29tbWl0KCd1c2VyJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHN0b3JlOw=="},{"version":3,"sources":["C:/Users/François Moriamé/Documents/OpenClassRooms/P7/frontend/groupomania/src/store/index.js"],"names":["createStore","axios","require","instance","create","baseURL","store","state","status","user","id","token","userInfos","nom","prenom","email","password","image","mutations","setStatus","logUser","defaults","headers","common","actions","createAccount","commit","Promise","resolve","reject","post","then","response","catch","error","login","data","getUserInfos","get","getUser"],"mappings":"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","sourcesContent":["import {createStore} from 'vuex'\r\nconst axios = require('axios')\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'http://localhost:5000/api'\r\n})\r\n\r\nconst store = createStore({\r\n  state: {\r\n    status: '',\r\n    user: {\r\n      id: -1,\r\n      token: '',\r\n    },\r\n    userInfos: {\r\n      nom: '',\r\n      prenom: '',\r\n      email: '',\r\n      password: '',\r\n      image: '',\r\n    }\r\n  },\r\n  mutations: {\r\n    setStatus: function (state, status) {\r\n      state.status = status\r\n\r\n    },\r\n    logUser: function (state, user) {\r\n      instance.defaults.headers.common['Authorization'] = user.token\r\n      state.user= user\r\n    },\r\n    userInfos: function (state, userInfos) {\r\n      state.userInfos = userInfos\r\n    }\r\n  },\r\n  actions: {\r\n    createAccount: ({commit}, userInfos) => {\r\n      return new Promise ((resolve, reject) => {\r\n        commit;\r\n        instance.post('/auth/signup', userInfos)\r\n        .then(function (response){\r\n          commit('setStatus', 'created')\r\n          resolve(response);\r\n        })\r\n        .catch(function (error) {\r\n          commit('setStatus', 'error_create')\r\n          reject(error)\r\n        })  \r\n      })\r\n    },\r\n    login: ({commit}, userInfos) => {\r\n      commit('setStatus', 'loading')\r\n      return new Promise ((resolve, reject) => {\r\n        instance.post('/auth/login', userInfos)\r\n        .then(function (response){\r\n          commit('setStatus', 'error_login')\r\n          commit('logUser', response.data)\r\n          resolve(response);\r\n        })\r\n        .catch(function (error) {\r\n          commit('setStatus', '')\r\n          reject(error)\r\n        });\r\n      });\r\n    },\r\n    getUserInfos: ({commit}) => {\r\n      instance.get('/auth/profile')\r\n        .then(function (response){\r\n          commit('userInfos', response.data)\r\n        })\r\n        .catch(function () {\r\n        });\r\n    },\r\n    getUser : ({commit}) => {\r\n      instance.get('/auth/profile/:id')\r\n      .then(function(response) {\r\n        commit('user', response.data)\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\nexport default store;\r\n\r\n"]}]}